---
# enable user-defined init containers

initContainers:
  es-check:
    image: "appropriate/curl:latest"
    imagePullPolicy: "IfNotPresent"
    command:
      - "/bin/sh"
      - "-c"
      - |
        is_down=true
        while "$is_down"; do
          if curl -sSf --fail-early --connect-timeout 5 http://elasticsearch:9200; then
            is_down=false
          else
            sleep 5
          fi
        done

  echo-container:
    image: busybox
    command: ['sh', '-c', 'echo Hello from init container! && sleep 3']
