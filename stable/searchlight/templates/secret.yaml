apiVersion: v1
kind: Secret
metadata:
  name: {{ template "fullname" . }}
  labels:
    app: "{{ template "name" . }}"
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    release: "{{ .Release.Name }}"
    heritage: "{{ .Release.Service }}"
data:
  {{ $name := default .Chart.Name .Values.nameOverride }}
  {{ $fullname := (printf "%s-%s" $name .Release.Name | trunc 45 )}}
  .env: {{default "" (printf "%s\nICINGA_ADDRESS=%s-icinga.%s" .Values.icinga.env $fullname .Release.Namespace) | b64enc | quote}}
  ca.crt: {{default "" .Values.icinga.caCrt | b64enc | quote}}
  icinga.key: {{default "" .Values.icinga.icingaKey| b64enc | quote}}
  icinga.crt: {{default "" .Values.icinga.icingaCrt| b64enc | quote}}
  notify_via: {{default "" .Values.icinga.notifyVia| b64enc | quote}}
  hipchat_auth_token: {{default "" .Values.icinga.hipchatAuthToken| b64enc | quote}}
  hipchat_to: {{default "" .Values.icinga.hipchatTo| b64enc | quote}}
  mailgun_domain: {{default "" .Values.icinga.mailgunDomain| b64enc | quote}}
  mailgun_api_key: {{default "" .Values.icinga.mailgunAPIKey| b64enc | quote}}
  mailgun_public_api_key: {{default "" .Values.icinga.mailgunPublicAPIKey| b64enc | quote}}
  mailgun_from: {{default "" .Values.icinga.mailgunFrom| b64enc | quote}}
  mailgun_to: {{default "" .Values.icinga.mailgunTo| b64enc | quote}}
  smtp_host: {{default "" .Values.icinga.smtpHost| b64enc | quote}}
  smtp_port: {{default "" .Values.icinga.smtpPort| b64enc | quote}}
  smtp_insecure_skip_verify: {{default "" .Values.icinga.smtpInsecureSkipVerify| b64enc | quote}}
  smtp_username: {{default "" .Values.icinga.smtpUsername| b64enc | quote}}
  smtp_password: {{default "" .Values.icinga.smtpPassword| b64enc | quote}}
  smtp_from: {{default "" .Values.icinga.smtpFrom| b64enc | quote}}
  smtp_to: {{default "" .Values.icinga.smtpTo| b64enc | quote}}
  twilio_account_sid: {{default "" .Values.icinga.twilioAccountSid| b64enc | quote}}
  twilio_auth_token: {{default "" .Values.icinga.twilioAuthToken| b64enc | quote}}
  twilio_from: {{default "" .Values.icinga.twilioFrom| b64enc | quote}}
  twilio_to: {{default "" .Values.icinga.twilioTo| b64enc | quote}}
  slack_auth_token: {{default "" .Values.icinga.slackAuthToken| b64enc | quote}}
  slack_channel:  {{default "" .Values.icinga.slackChannel| b64enc | quote}}
  plivo_auth_id: {{default "" .Values.icinga.plivoAuthId| b64enc | quote}}
  plivo_auth_token: {{default "" .Values.icinga.plivoAuthToken| b64enc | quote}}
  plivo_from: {{default "" .Values.icinga.plivoFrom| b64enc | quote}}
  plivo_to: {{default "" .Values.icinga.plivoTo| b64enc | quote}}
