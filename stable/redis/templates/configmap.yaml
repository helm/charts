apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ template "redis.fullname" . }}
  labels: {{- include "redis.labels" . | nindent 4 }}
data:
  redis.conf: |-
    dir {{ .Values.persistence.path }}
    port {{ .Values.redisPort }}
{{- if .Values.cluster.enabled }}
    cluster-enabled yes
    cluster-config-file /data/nodes.conf
{{- end }}
    appendonly yes
{{- if .Values.configmap }}
{{ tpl .Values.configmap . | indent 4 }}
{{- end }}
