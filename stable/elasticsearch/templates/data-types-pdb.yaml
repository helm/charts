{{- range $data := .Values.dataTypes }}
{{- if $data.podDisruptionBudget.enabled }}
apiVersion: policy/v1beta1
kind: PodDisruptionBudget
metadata:
  labels:
    app: {{ include "elasticsearch.name" $ }}
    chart: {{ $.Chart.Name }}-{{ $.Chart.Version }}
    component: "{{ $data.name }}"
    heritage: {{ $.Release.Service }}
    release: {{ $.Release.Name }}
  name: {{ include "elasticsearch.fullname" $ }}-{{ $data.name }}
spec:
{{- if $data.podDisruptionBudget.minAvailable }}
  minAvailable: {{ $data.podDisruptionBudget.minAvailable }}
{{- end }}
{{- if $data.podDisruptionBudget.maxUnavailable }}
  maxUnavailable: {{ $data.podDisruptionBudget.maxUnavailable }}
{{- end }}
  selector:
    matchLabels:
      app: {{ include "elasticsearch.name" $ }}
      component: "{{ $data.name }}"
      release: {{ $.Release.Name }}
{{- end }}
{{- end }}
