{{- if and .Values.persistence.enabled (not .Values.persistence.existingClassName) -}}
kind: StorageClass
apiVersion: storage.k8s.io/v1beta1
metadata:
 name: "{{ .Values.persistence.storageClass }}"
provisioner: {{ .Values.persistence.storage.provisioner }}
parameters:
 skuName: {{ .Values.persistence.storage.parameters.skuName }}
 location: {{ .Values.persistence.storage.parameters.location }}
 {{- end -}}