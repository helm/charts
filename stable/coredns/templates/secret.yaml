{{- if and .Values.kubernetesTLS.enabled ( not .Values.kubernetesTLS.secretName ) }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ template "coredns.fullname" . }}-kube-tls
data:
  tls.pem: {{ .Values.kubernetesTLS.cert }}
  tls.key: {{ .Values.kubernetesTLS.key }}
  cacert.pem: {{ .Values.kubernetesTLS.cacert }}
{{- end }}
