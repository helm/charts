apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ template "fullname" . }}
data:
{{ (.Files.Glob "default.conf").AsConfig | indent 2 }}
  application.properties: |
    domain={{ .Values.DISCONF_DOAMIN }}
    EMAIL_MONITOR_ON = {{ default true .Values.EMAIL_MONITOR_ON }} 
    EMAIL_HOST = {{ default "" .Values.EMAIL_HOST }} 
    EMAIL_HOST_PASSWORD = {{ default "" .Values.EMAIL_HOST_PASSWORD }} 
    EMAIL_HOST_USER = {{ default "" .Values.EMAIL_HOST_USER }} 
    EMAIL_PORT = {{ default "" .Values.EMAIL_PORT }} 
    DEFAULT_FROM_EMAIL = {{ default 25 .Values.DEFAULT_FROM_EMAIL }} 
    CHECK_CONSISTENCY_ON= true
  jdbc-mysql.properties: |-
    jdbc.driverClassName=com.mysql.jdbc.Driver
    jdbc.db_0.url=jdbc:mysql://{{ .Values.mysqlHost }}:{{ .Values.mysqlPort }}/disconf?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&rewriteBatchedStatements=false
    jdbc.db_0.username={{ .Values.mysqlUser }} 
    jdbc.db_0.password={{ .Values.mysqlPassword }} 
    jdbc.maxPoolSize=20
    jdbc.minPoolSize=10
    jdbc.initialPoolSize=10
    jdbc.idleConnectionTestPeriod=1200
    jdbc.maxIdleTime=3600
  redis-config.properties: |-
    redis.group1.retry.times=2
    redis.group1.client1.name=BeidouRedis1
    redis.group1.client1.host={{ .Values.REDIS_HOST1 }} 
    redis.group1.client1.port={{ .Values.REDIS_PORT1 }}
    redis.group1.client1.timeout=5000
    redis.group1.client1.password={{ default "" .Values.REDIS_PASSWD1 }}
    redis.group1.client2.name=BeidouRedis2
    redis.group1.client2.host={{ .Values.REDIS_HOST2 }}
    redis.group1.client2.port={{ .Values.REDIS_PORT2 }}
    redis.group1.client2.timeout=5000
    redis.group1.client2.password={{ default "" .Values.REDIS_PASSWD2 }}
    redis.evictor.delayCheckSeconds=300
    redis.evictor.checkPeriodSeconds=30
    redis.evictor.failedTimesToBeTickOut=6
  zoo.properties: |2-
    hosts={{ .Values.ZOOK_HOSTS }}
    zookeeper_url_prefix=/disconf