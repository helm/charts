image: "oryd/hydra"
imageTag: "v0.8.6"
imagePullPolicy: "Always"

service:
  ## For minikube, set this to NodePort, elsewhere use LoadBalancer
  ## ref: http://kubernetes.io/docs/user-guide/services/#publishing-services---service-types
  type: "LoadBalancer"
  port: 4444
  ## Optional annotations for hydra service.
  ## Example use: https://kubernetes.io/docs/concepts/services-networking/service/#internal-load-balancer-on-aws
  annotations: {}
  #   service.beta.kubernetes.io/aws-load-balancer-internal: 0.0.0.0/0

config:
  # Core Controls
  hydra:
    ## Configure access to an external database.
    ## For this setting to be used you need to disable the included postgresql database below.
    #databaseURL: 

    # A secret that is at least 16 characters long. If none is provided, one will be generated.
    systemSecret:
    # A secret that is used to encrypt cookie sessions. Defaults to SYSTEM_SECRET. It is recommended to use a separate secret in production.
    cookieSecret:
    # Set the bcrypt hashing cost. This is a trade off between security and performance. Range is 4 =< x =< 31.
    bcryptCost: 10
    # Set the log level, supports "panic", "fatal", "error", "warn", "info" and "debug". Defaults to "info".
    logLevel: "debug"
    # Leave empty for text based log format, or set to "json" for JSON formatting.
    logFormat:

  # OAuth2 Controls
  oauth2:
    # The URL of the consent endpoint.
    consentURL: "https://example.com/consent"
    # The issuer is used for identification in all OAuth2 tokens. Should be the public url of the server.
    issuer: "hydra.example.com"
    # Lifespan of OAuth2 authorize codes. Valid time units are "ns", "us" (or "µs"), "ms", "s", "m", "h".
    authCodeLifespan: "10m"
    # Lifespan of OpenID Connect ID Tokens. Valid time units are "ns", "us" (or "µs"), "ms", "s", "m", "h".
    idTokenLifespan: "1h"
    # Lifespan of OAuth2 access tokens. Valid time units are "ns", "us" (or "µs"), "ms", "s", "m", "h".
    accessTokenLifespan: "5m"
    #  Lifespan of OAuth2 consent tokens. Valid time units are "ns", "us" (or "µs"), "ms", "s", "m", "h".
    challengeTokenLifespan: "10m"

  # HTTP Controls
  http:
    # Whitelist one or multiple CIDR address ranges and allow them to terminate TLS connections.
    # Be aware that the X-Forwarded-Proto header must be set and must never be modifiable by anyone but your proxy / gateway / load balancer. Supports ipv4 and ipv6.
    # Hydra serves http instead of https when this option is set.
    httpsAllowTerminationFrom: "0.0.0.0/0"

ingress:
  # If true, hydra Ingress will be created
  #
  enabled: false

  # hydra Ingress annotations
  annotations: {}
  #   kubernetes.io/ingress.class: "nginx"
  #   kubernetes.io/tls-acme: true

  # hydra Ingress hostnames
  # Must be provided if Ingress is enabled
  #
  hosts: []
  #   - "hydra.example.com"

  # hydra Ingress TLS configuration
  # Secrets must be created in the namespace, and is not done for you in this chart
  #
  tls: []
  #   - secretName: "hydra-tls"
  #     hosts:
  #       - "hydra.example.com"


# Configuration values for the postgresql dependency.
# ref: https://github.com/kubernetes/charts/blob/master/stable/postgresql/README.md
postgresql:
  # Sets whether the postgresql helm chart is used as a dependency
  enabled: true

  imageTag: "9.6"
  cpu: "250m"
  memory: "256Mi"

  postgresUser: "hydra"
  # Important: change this when deploying in production.
  postgresPassword: "hydra"
  postgresDatabase: "hydra"

  persistence:
    size: "10GB"

# Configure resource requests and limits
# ref: http://kubernetes.io/docs/user-guide/compute-resources/
resources:
  requests:
    memory: "128Mi"
    cpu: "100m"
