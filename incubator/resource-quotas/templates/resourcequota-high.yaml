{{- range $namespace, $quotas := .Values.namespaces }}
{{- if $high := index $quotas "high" }}
---
apiVersion: v1
kind: ResourceQuota
namespace: {{ $namespace | quote }}
metadata:
  name: "{{ $namespace }}-high"
spec:
  hard:
  {{- range $k, $v := $high}}
    {{ $k }}: {{ $v | quote }}
  {{- end }}
  scopeSelector:
    matchExpressions:
      - operator : In
        scopeName: PriorityClass
        values: ["high"]
{{- end }}
{{- end }}
