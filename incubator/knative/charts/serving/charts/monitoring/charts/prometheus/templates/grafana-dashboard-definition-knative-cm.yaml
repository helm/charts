apiVersion: v1
data:
  resource-dashboard.json: "{\n  \"__inputs\": [\n    {\n      \"description\": \"\",\n      \"label\": \"prometheus\",\n      \"name\": \"prometheus\",\n      \"pluginId\": \"prometheus\",\n      \"pluginName\": \"Prometheus\",\n      \"type\": \"datasource\"\n    }\n  ],\n  \"annotations\": {\n    \"list\": []\n  },\n  \"description\": \"Knative Serving - Revision CPU and Memory Usage\",\n  \"editable\": false,\n  \"gnetId\": null,\n  \"graphTooltip\": 0,\n  \"links\": [],\n  \"panels\": [\n    {\n      \"aliasColors\": {},\n      \"bars\": false,\n      \"dashLength\": 10,\n      \"dashes\": false,\n      \"datasource\": \"prometheus\",\n      \"fill\": 1,\n      \"gridPos\": {\n        \"h\": 9,\n        \"w\": 12,\n        \"x\": 0,\n        \"y\": 0\n      },\n      \"id\": 2,\n      \"legend\": {\n        \"avg\": false,\n        \"current\": false,\n        \"max\": false,\n        \"min\": false,\n        \"show\": true,\n        \"total\": false,\n        \"values\": false\n  \
    \    },\n      \"lines\": true,\n      \"linewidth\": 1,\n      \"links\": [],\n      \"nullPointMode\": \"null\",\n      \"percentage\": false,\n      \"pointradius\": 5,\n      \"points\": false,\n      \"renderer\": \"flot\",\n      \"seriesOverrides\": [],\n      \"spaceLength\": 10,\n      \"stack\": false,\n      \"steppedLine\": false,\n      \"targets\": [\n        {\n          \"expr\": \"sum(rate(container_cpu_usage_seconds_total{namespace=\\\"$namespace\\\", pod_name=~\\\"$revision.*\\\", container_name != \\\"POD\\\"}[1m])) by (container_name)\",\n          \"format\": \"time_series\",\n          \"intervalFactor\": 1,\n          \"legendFormat\": \"{{"{{"}}container_name{{"}}"}}\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"thresholds\": [],\n      \"timeFrom\": null,\n      \"timeShift\": null,\n      \"title\": \"Total CPU Usage\",\n      \"tooltip\": {\n        \"shared\": true,\n        \"sort\": 2,\n        \"value_type\": \"individual\"\n      },\n      \"type\"\
    : \"graph\",\n      \"xaxis\": {\n        \"buckets\": null,\n        \"mode\": \"time\",\n        \"name\": null,\n        \"show\": true,\n        \"values\": []\n      },\n      \"yaxes\": [\n        {\n          \"format\": \"s\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": true\n        },\n        {\n          \"format\": \"short\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": false\n        }\n      ]\n    },\n    {\n      \"aliasColors\": {},\n      \"bars\": false,\n      \"dashLength\": 10,\n      \"dashes\": false,\n      \"datasource\": \"prometheus\",\n      \"fill\": 1,\n      \"gridPos\": {\n        \"h\": 9,\n        \"w\": 12,\n        \"x\": 12,\n        \"y\": 0\n      },\n      \"id\": 3,\n      \"legend\": {\n        \"avg\": false,\n        \"current\": false,\n        \"max\": false,\n        \"min\"\
    : false,\n        \"show\": true,\n        \"total\": false,\n        \"values\": false\n      },\n      \"lines\": true,\n      \"linewidth\": 1,\n      \"links\": [],\n      \"nullPointMode\": \"null\",\n      \"percentage\": false,\n      \"pointradius\": 5,\n      \"points\": false,\n      \"renderer\": \"flot\",\n      \"seriesOverrides\": [],\n      \"spaceLength\": 10,\n      \"stack\": false,\n      \"steppedLine\": false,\n      \"targets\": [\n        {\n          \"expr\": \"sum(container_memory_usage_bytes{namespace=\\\"$namespace\\\", pod_name=~\\\"$revision.*\\\", container_name != \\\"POD\\\"}) by (container_name)\",\n          \"format\": \"time_series\",\n          \"intervalFactor\": 1,\n          \"legendFormat\": \"{{"{{"}}container_name{{"}}"}}\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"thresholds\": [],\n      \"timeFrom\": null,\n      \"timeShift\": null,\n      \"title\": \"Total Memory Usage\",\n      \"tooltip\": {\n        \"shared\": true,\n       \
    \ \"sort\": 2,\n        \"value_type\": \"individual\"\n      },\n      \"type\": \"graph\",\n      \"xaxis\": {\n        \"buckets\": null,\n        \"mode\": \"time\",\n        \"name\": null,\n        \"show\": true,\n        \"values\": []\n      },\n      \"yaxes\": [\n        {\n          \"format\": \"decbytes\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": true\n        },\n        {\n          \"format\": \"short\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": false\n        }\n      ]\n    }\n  ],\n  \"refresh\": \"5s\",\n  \"schemaVersion\": 16,\n  \"style\": \"dark\",\n  \"tags\": [],\n  \"templating\": {\n    \"list\": [\n      {\n        \"allValue\": null,\n        \"current\": {},\n        \"datasource\": \"prometheus\",\n        \"hide\": 0,\n        \"includeAll\": false,\n        \"label\": \"Namespace\"\
    ,\n        \"multi\": false,\n        \"name\": \"namespace\",\n        \"options\": [],\n        \"query\": \"label_values(container_memory_usage_bytes{container_name=\\\"user-container\\\"}, namespace)\",\n        \"refresh\": 1,\n        \"regex\": \"\",\n        \"sort\": 1,\n        \"tagValuesQuery\": \"\",\n        \"tags\": [],\n        \"tagsQuery\": \"\",\n        \"type\": \"query\",\n        \"useTags\": false\n      },\n      {\n        \"allValue\": null,\n        \"current\": {},\n        \"datasource\": \"prometheus\",\n        \"hide\": 0,\n        \"includeAll\": false,\n        \"label\": \"Configuration\",\n        \"multi\": false,\n        \"name\": \"configuration\",\n        \"options\": [],\n        \"query\": \"label_values(container_memory_usage_bytes{namespace=\\\"$namespace\\\"}, pod_name)\",\n        \"refresh\": 1,\n        \"regex\": \"(.+?)-\\\\d\\\\d\\\\d\\\\d\\\\d-deployment-.*\",\n        \"sort\": 1,\n        \"tagValuesQuery\": \"\",\n        \"\
    tags\": [],\n        \"tagsQuery\": \"\",\n        \"type\": \"query\",\n        \"useTags\": false\n      },\n      {\n        \"allValue\": null,\n        \"current\": {},\n        \"datasource\": \"prometheus\",\n        \"hide\": 0,\n        \"includeAll\": false,\n        \"label\": \"Revision\",\n        \"multi\": false,\n        \"name\": \"revision\",\n        \"options\": [],\n        \"query\": \"label_values(container_memory_usage_bytes{namespace=\\\"$namespace\\\", pod_name=~\\\"$configuration.*?-deployment.*?\\\"}, pod_name)\",\n        \"refresh\": 1,\n        \"regex\": \"(.+?-\\\\d\\\\d\\\\d\\\\d\\\\d)-deployment-.*\",\n        \"sort\": 2,\n        \"tagValuesQuery\": \"\",\n        \"tags\": [],\n        \"tagsQuery\": \"\",\n        \"type\": \"query\",\n        \"useTags\": false\n      }\n    ]\n  },\n  \"time\": {\n    \"from\": \"now-15m\",\n    \"to\": \"now\"\n  },\n  \"timepicker\": {\n    \"refresh_intervals\": [\n      \"5s\",\n      \"10s\",\n      \"30s\"\
    ,\n      \"1m\",\n      \"5m\",\n      \"15m\",\n      \"30m\",\n      \"1h\",\n      \"2h\",\n      \"1d\"\n    ],\n    \"time_options\": [\n      \"5m\",\n      \"15m\",\n      \"1h\",\n      \"6h\",\n      \"12h\",\n      \"24h\",\n      \"2d\",\n      \"7d\",\n      \"30d\"\n    ]\n  },\n  \"timezone\": \"\",\n  \"title\": \"Knative Serving - Revision CPU and Memory Usage\",\n  \"uid\": \"bKOoE9Wmk\",\n  \"version\": 4\n}\n"
  revision-dashboard.json: "{\n  \"__inputs\": [\n    {\n      \"description\": \"\",\n      \"label\": \"prometheus\",\n      \"name\": \"prometheus\",\n      \"pluginId\": \"prometheus\",\n      \"pluginName\": \"Prometheus\",\n      \"type\": \"datasource\"\n    }\n  ],\n  \"annotations\": {\n    \"list\": []\n  },\n  \"description\": \"Knative Serving - Revision HTTP Requests\",\n  \"editable\": false,\n  \"gnetId\": null,\n  \"graphTooltip\": 0,\n  \"links\": [],\n  \"panels\": [\n    {\n      \"collapsed\": false,\n      \"gridPos\": {\n        \"h\": 1,\n        \"w\": 24,\n        \"x\": 0,\n        \"y\": 0\n      },\n      \"id\": 8,\n      \"panels\": [],\n      \"title\": \"Overview (average over the selected time range)\",\n      \"type\": \"row\"\n    },\n    {\n      \"cacheTimeout\": null,\n      \"colorBackground\": false,\n      \"colorValue\": false,\n      \"colors\": [\n        \"#299c46\",\n        \"rgba(237, 129, 40, 0.89)\",\n        \"#d44a3a\"\n      ],\n     \
    \ \"datasource\": \"prometheus\",\n      \"format\": \"ops\",\n      \"gauge\": {\n        \"maxValue\": 100,\n        \"minValue\": 0,\n        \"show\": false,\n        \"thresholdLabels\": false,\n        \"thresholdMarkers\": true\n      },\n      \"gridPos\": {\n        \"h\": 4,\n        \"w\": 6,\n        \"x\": 0,\n        \"y\": 1\n      },\n      \"id\": 2,\n      \"interval\": null,\n      \"links\": [],\n      \"mappingType\": 1,\n      \"mappingTypes\": [\n        {\n          \"name\": \"value to text\",\n          \"value\": 1\n        },\n        {\n          \"name\": \"range to text\",\n          \"value\": 2\n        }\n      ],\n      \"maxDataPoints\": 100,\n      \"nullPointMode\": \"connected\",\n      \"nullText\": null,\n      \"postfix\": \"\",\n      \"postfixFontSize\": \"50%\",\n      \"prefix\": \"\",\n      \"prefixFontSize\": \"50%\",\n      \"rangeMaps\": [\n        {\n          \"from\": \"null\",\n          \"text\": \"N/A\",\n          \"to\": \"null\"\
    \n        }\n      ],\n      \"repeat\": null,\n      \"repeatDirection\": \"v\",\n      \"sparkline\": {\n        \"fillColor\": \"rgba(31, 118, 189, 0.18)\",\n        \"full\": true,\n        \"lineColor\": \"rgb(31, 120, 193)\",\n        \"show\": true\n      },\n      \"tableColumn\": \"\",\n      \"targets\": [\n        {\n          \"expr\": \"round(sum(rate(istio_revision_request_count{destination_namespace=\\\"$namespace\\\", destination_revision=~\\\"$revision\\\", destination_configuration=~\\\"$configuration\\\"}[1m])), 0.001)\",\n          \"format\": \"time_series\",\n          \"hide\": false,\n          \"interval\": \"\",\n          \"intervalFactor\": 1,\n          \"refId\": \"A\"\n        }\n      ],\n      \"thresholds\": \"\",\n      \"title\": \"Request Volume\",\n      \"type\": \"singlestat\",\n      \"valueFontSize\": \"80%\",\n      \"valueMaps\": [\n        {\n          \"op\": \"=\",\n          \"text\": \"N/A\",\n          \"value\": \"null\"\n        }\n\
    \      ],\n      \"valueName\": \"avg\"\n    },\n    {\n      \"cacheTimeout\": null,\n      \"colorBackground\": false,\n      \"colorValue\": false,\n      \"colors\": [\n        \"#d44a3a\",\n        \"rgba(237, 129, 40, 0.89)\",\n        \"#299c46\"\n      ],\n      \"datasource\": \"prometheus\",\n      \"format\": \"percentunit\",\n      \"gauge\": {\n        \"maxValue\": 100,\n        \"minValue\": 0,\n        \"show\": false,\n        \"thresholdLabels\": false,\n        \"thresholdMarkers\": true\n      },\n      \"gridPos\": {\n        \"h\": 4,\n        \"w\": 6,\n        \"x\": 6,\n        \"y\": 1\n      },\n      \"id\": 4,\n      \"interval\": null,\n      \"links\": [],\n      \"mappingType\": 1,\n      \"mappingTypes\": [\n        {\n          \"name\": \"value to text\",\n          \"value\": 1\n        },\n        {\n          \"name\": \"range to text\",\n          \"value\": 2\n        }\n      ],\n      \"maxDataPoints\": 100,\n      \"nullPointMode\": \"connected\"\
    ,\n      \"nullText\": null,\n      \"postfix\": \"\",\n      \"postfixFontSize\": \"50%\",\n      \"prefix\": \"\",\n      \"prefixFontSize\": \"50%\",\n      \"rangeMaps\": [\n        {\n          \"from\": \"null\",\n          \"text\": \"N/A\",\n          \"to\": \"null\"\n        }\n      ],\n      \"sparkline\": {\n        \"fillColor\": \"rgba(31, 118, 189, 0.18)\",\n        \"full\": true,\n        \"lineColor\": \"rgb(31, 120, 193)\",\n        \"show\": true\n      },\n      \"tableColumn\": \"\",\n      \"targets\": [\n        {\n          \"expr\": \"sum(rate(istio_revision_request_count{response_code!~\\\"5.*\\\", destination_namespace=\\\"$namespace\\\", destination_revision=~\\\"$revision\\\", destination_configuration=~\\\"$configuration\\\"}[1m])) / sum(rate(istio_revision_request_count{destination_namespace=\\\"$namespace\\\", destination_revision=~\\\"$revision\\\", destination_configuration=~\\\"$configuration\\\"}[1m]))\",\n          \"format\": \"time_series\",\n\
    \          \"interval\": \"\",\n          \"intervalFactor\": 1,\n          \"refId\": \"A\"\n        }\n      ],\n      \"thresholds\": \"95, 99, 99.5\",\n      \"title\": \"Success Rate (non-5xx responses)\",\n      \"type\": \"singlestat\",\n      \"valueFontSize\": \"80%\",\n      \"valueMaps\": [\n        {\n          \"op\": \"=\",\n          \"text\": \"N/A\",\n          \"value\": \"null\"\n        }\n      ],\n      \"valueName\": \"avg\"\n    },\n    {\n      \"cacheTimeout\": null,\n      \"colorBackground\": false,\n      \"colorValue\": false,\n      \"colors\": [\n        \"#d44a3a\",\n        \"rgba(237, 129, 40, 0.89)\",\n        \"#299c46\"\n      ],\n      \"datasource\": \"prometheus\",\n      \"format\": \"ops\",\n      \"gauge\": {\n        \"maxValue\": 100,\n        \"minValue\": 0,\n        \"show\": false,\n        \"thresholdLabels\": false,\n        \"thresholdMarkers\": true\n      },\n      \"gridPos\": {\n        \"h\": 4,\n        \"w\": 6,\n        \"\
    x\": 12,\n        \"y\": 1\n      },\n      \"id\": 5,\n      \"interval\": null,\n      \"links\": [],\n      \"mappingType\": 1,\n      \"mappingTypes\": [\n        {\n          \"name\": \"value to text\",\n          \"value\": 1\n        },\n        {\n          \"name\": \"range to text\",\n          \"value\": 2\n        }\n      ],\n      \"maxDataPoints\": 100,\n      \"nullPointMode\": \"connected\",\n      \"nullText\": null,\n      \"postfix\": \"\",\n      \"postfixFontSize\": \"50%\",\n      \"prefix\": \"\",\n      \"prefixFontSize\": \"50%\",\n      \"rangeMaps\": [\n        {\n          \"from\": \"null\",\n          \"text\": \"N/A\",\n          \"to\": \"null\"\n        }\n      ],\n      \"sparkline\": {\n        \"fillColor\": \"rgba(31, 118, 189, 0.18)\",\n        \"full\": true,\n        \"lineColor\": \"rgb(31, 120, 193)\",\n        \"show\": true\n      },\n      \"tableColumn\": \"\",\n      \"targets\": [\n        {\n          \"expr\": \"sum(rate(istio_revision_request_count{response_code=~\\\
    \"4.*\\\", destination_namespace=\\\"$namespace\\\", destination_revision=~\\\"$revision\\\", destination_configuration=~\\\"$configuration\\\"}[1m])) \",\n          \"format\": \"time_series\",\n          \"interval\": \"\",\n          \"intervalFactor\": 1,\n          \"refId\": \"A\"\n        }\n      ],\n      \"thresholds\": \"\",\n      \"title\": \"4xxs\",\n      \"type\": \"singlestat\",\n      \"valueFontSize\": \"80%\",\n      \"valueMaps\": [\n        {\n          \"op\": \"=\",\n          \"text\": \"N/A\",\n          \"value\": \"null\"\n        }\n      ],\n      \"valueName\": \"avg\"\n    },\n    {\n      \"cacheTimeout\": null,\n      \"colorBackground\": false,\n      \"colorValue\": false,\n      \"colors\": [\n        \"#d44a3a\",\n        \"rgba(237, 129, 40, 0.89)\",\n        \"#299c46\"\n      ],\n      \"datasource\": \"prometheus\",\n      \"format\": \"ops\",\n      \"gauge\": {\n        \"maxValue\": 100,\n        \"minValue\": 0,\n        \"show\": false,\n\
    \        \"thresholdLabels\": false,\n        \"thresholdMarkers\": true\n      },\n      \"gridPos\": {\n        \"h\": 4,\n        \"w\": 6,\n        \"x\": 18,\n        \"y\": 1\n      },\n      \"id\": 9,\n      \"interval\": null,\n      \"links\": [],\n      \"mappingType\": 1,\n      \"mappingTypes\": [\n        {\n          \"name\": \"value to text\",\n          \"value\": 1\n        },\n        {\n          \"name\": \"range to text\",\n          \"value\": 2\n        }\n      ],\n      \"maxDataPoints\": 100,\n      \"nullPointMode\": \"connected\",\n      \"nullText\": null,\n      \"postfix\": \"\",\n      \"postfixFontSize\": \"50%\",\n      \"prefix\": \"\",\n      \"prefixFontSize\": \"50%\",\n      \"rangeMaps\": [\n        {\n          \"from\": \"null\",\n          \"text\": \"N/A\",\n          \"to\": \"null\"\n        }\n      ],\n      \"sparkline\": {\n        \"fillColor\": \"rgba(31, 118, 189, 0.18)\",\n        \"full\": true,\n        \"lineColor\": \"rgb(31,\
    \ 120, 193)\",\n        \"show\": true\n      },\n      \"tableColumn\": \"\",\n      \"targets\": [\n        {\n          \"expr\": \"sum(rate(istio_revision_request_count{response_code=~\\\"5.*\\\", destination_namespace=\\\"$namespace\\\", destination_revision=~\\\"$revision\\\", destination_configuration=~\\\"$configuration\\\"}[1m])) \",\n          \"format\": \"time_series\",\n          \"interval\": \"\",\n          \"intervalFactor\": 1,\n          \"refId\": \"A\"\n        }\n      ],\n      \"thresholds\": \"\",\n      \"title\": \"5xxs\",\n      \"type\": \"singlestat\",\n      \"valueFontSize\": \"80%\",\n      \"valueMaps\": [\n        {\n          \"op\": \"=\",\n          \"text\": \"N/A\",\n          \"value\": \"null\"\n        }\n      ],\n      \"valueName\": \"avg\"\n    },\n    {\n      \"collapsed\": false,\n      \"gridPos\": {\n        \"h\": 1,\n        \"w\": 24,\n        \"x\": 0,\n        \"y\": 5\n      },\n      \"id\": 11,\n      \"panels\": [],\n     \
    \ \"title\": \"Request Volume\",\n      \"type\": \"row\"\n    },\n    {\n      \"aliasColors\": {},\n      \"bars\": false,\n      \"dashLength\": 10,\n      \"dashes\": false,\n      \"datasource\": \"prometheus\",\n      \"fill\": 1,\n      \"gridPos\": {\n        \"h\": 10,\n        \"w\": 12,\n        \"x\": 0,\n        \"y\": 6\n      },\n      \"id\": 17,\n      \"legend\": {\n        \"avg\": false,\n        \"current\": false,\n        \"max\": false,\n        \"min\": false,\n        \"show\": true,\n        \"total\": false,\n        \"values\": false\n      },\n      \"lines\": true,\n      \"linewidth\": 1,\n      \"links\": [],\n      \"nullPointMode\": \"null\",\n      \"percentage\": false,\n      \"pointradius\": 5,\n      \"points\": false,\n      \"renderer\": \"flot\",\n      \"seriesOverrides\": [],\n      \"spaceLength\": 10,\n      \"stack\": false,\n      \"steppedLine\": false,\n      \"targets\": [\n        {\n          \"expr\": \"label_replace(round(sum(rate(istio_revision_request_count{destination_namespace=\\\
    \"$namespace\\\", destination_configuration=~\\\"$configuration\\\",destination_revision=~\\\"$revision\\\"}[1m])) by (destination_revision), 0.001), \\\"destination_revision\\\", \\\"$2\\\", \\\"destination_revision\\\", \\\"$configuration(-+)(.*)\\\")\",\n          \"format\": \"time_series\",\n          \"interval\": \"\",\n          \"intervalFactor\": 1,\n          \"legendFormat\": \"{{"{{"}}destination_revision{{"}}"}}\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"thresholds\": [],\n      \"timeFrom\": null,\n      \"timeShift\": null,\n      \"title\": \"Request Volume by Revision\",\n      \"tooltip\": {\n        \"shared\": true,\n        \"sort\": 2,\n        \"value_type\": \"individual\"\n      },\n      \"type\": \"graph\",\n      \"xaxis\": {\n        \"buckets\": null,\n        \"mode\": \"time\",\n        \"name\": null,\n        \"show\": true,\n        \"values\": []\n      },\n      \"yaxes\": [\n        {\n          \"format\": \"ops\",\n          \"label\": null,\n\
    \          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": true\n        },\n        {\n          \"format\": \"short\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": true\n        }\n      ]\n    },\n    {\n      \"aliasColors\": {},\n      \"bars\": false,\n      \"dashLength\": 10,\n      \"dashes\": false,\n      \"datasource\": \"prometheus\",\n      \"fill\": 1,\n      \"gridPos\": {\n        \"h\": 10,\n        \"w\": 12,\n        \"x\": 12,\n        \"y\": 6\n      },\n      \"id\": 18,\n      \"legend\": {\n        \"avg\": false,\n        \"current\": false,\n        \"max\": false,\n        \"min\": false,\n        \"show\": true,\n        \"total\": false,\n        \"values\": false\n      },\n      \"lines\": true,\n      \"linewidth\": 1,\n      \"links\": [],\n      \"nullPointMode\": \"null\",\n      \"percentage\": false,\n      \"pointradius\":\
    \ 5,\n      \"points\": false,\n      \"renderer\": \"flot\",\n      \"seriesOverrides\": [],\n      \"spaceLength\": 10,\n      \"stack\": false,\n      \"steppedLine\": false,\n      \"targets\": [\n        {\n          \"expr\": \"round(sum(rate(istio_revision_request_count{destination_namespace=\\\"$namespace\\\", destination_configuration=~\\\"$configuration\\\",destination_revision=~\\\"$revision\\\"}[1m])) by (response_code), 0.001)\",\n          \"format\": \"time_series\",\n          \"interval\": \"\",\n          \"intervalFactor\": 1,\n          \"legendFormat\": \"{{"{{"}} response_code {{"}}"}}\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"thresholds\": [],\n      \"timeFrom\": null,\n      \"timeShift\": null,\n      \"title\": \"Request Volume by Response Code\",\n      \"tooltip\": {\n        \"shared\": true,\n        \"sort\": 2,\n        \"value_type\": \"individual\"\n      },\n      \"type\": \"graph\",\n      \"xaxis\": {\n        \"buckets\": null,\n       \
    \ \"mode\": \"time\",\n        \"name\": null,\n        \"show\": true,\n        \"values\": []\n      },\n      \"yaxes\": [\n        {\n          \"format\": \"ops\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": true\n        },\n        {\n          \"format\": \"short\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": true\n        }\n      ]\n    },\n    {\n      \"collapsed\": false,\n      \"gridPos\": {\n        \"h\": 1,\n        \"w\": 24,\n        \"x\": 0,\n        \"y\": 16\n      },\n      \"id\": 15,\n      \"panels\": [],\n      \"title\": \"Response Time\",\n      \"type\": \"row\"\n    },\n    {\n      \"aliasColors\": {},\n      \"bars\": false,\n      \"dashLength\": 10,\n      \"dashes\": false,\n      \"datasource\": \"prometheus\",\n      \"fill\": 1,\n      \"gridPos\": {\n        \"h\": 9,\n       \
    \ \"w\": 12,\n        \"x\": 0,\n        \"y\": 17\n      },\n      \"id\": 20,\n      \"legend\": {\n        \"alignAsTable\": false,\n        \"avg\": true,\n        \"current\": false,\n        \"hideEmpty\": false,\n        \"hideZero\": false,\n        \"max\": false,\n        \"min\": false,\n        \"rightSide\": false,\n        \"show\": true,\n        \"total\": false,\n        \"values\": true\n      },\n      \"lines\": true,\n      \"linewidth\": 1,\n      \"links\": [],\n      \"nullPointMode\": \"null\",\n      \"percentage\": false,\n      \"pointradius\": 5,\n      \"points\": false,\n      \"renderer\": \"flot\",\n      \"seriesOverrides\": [],\n      \"spaceLength\": 10,\n      \"stack\": false,\n      \"steppedLine\": false,\n      \"targets\": [\n        {\n          \"expr\": \"label_replace(histogram_quantile(0.50, sum(rate(istio_revision_request_duration_bucket{destination_namespace=\\\"$namespace\\\", destination_configuration=~\\\"$configuration\\\",destination_revision=~\\\
    \"$revision\\\"}[1m])) by (destination_revision, le)), \\\"destination_revision\\\", \\\"$2\\\", \\\"destination_revision\\\", \\\"$configuration(-+)(.*)\\\")\",\n          \"format\": \"time_series\",\n          \"intervalFactor\": 1,\n          \"legendFormat\": \"{{"{{"}} destination_revision {{"}}"}} (p50)\",\n          \"refId\": \"A\"\n        },\n        {\n          \"expr\": \"label_replace(histogram_quantile(0.90, sum(rate(istio_revision_request_duration_bucket{destination_namespace=\\\"$namespace\\\", destination_configuration=~\\\"$configuration\\\",destination_revision=~\\\"$revision\\\"}[1m])) by (destination_revision, le)), \\\"destination_revision\\\", \\\"$2\\\", \\\"destination_revision\\\", \\\"$configuration(-+)(.*)\\\")\",\n          \"format\": \"time_series\",\n          \"intervalFactor\": 1,\n          \"legendFormat\": \"{{"{{"}} destination_revision {{"}}"}} (p90)\",\n          \"refId\": \"B\"\n        },\n        {\n          \"expr\": \"label_replace(histogram_quantile(0.95, sum(rate(istio_revision_request_duration_bucket{destination_namespace=\\\
    \"$namespace\\\", destination_configuration=~\\\"$configuration\\\",destination_revision=~\\\"$revision\\\"}[1m])) by (destination_revision, le)), \\\"destination_revision\\\", \\\"$2\\\", \\\"destination_revision\\\", \\\"$configuration(-+)(.*)\\\")\",\n          \"format\": \"time_series\",\n          \"intervalFactor\": 1,\n          \"legendFormat\": \"{{"{{"}} destination_revision {{"}}"}} (p95)\",\n          \"refId\": \"C\"\n        },\n        {\n          \"expr\": \"label_replace(histogram_quantile(0.99, sum(rate(istio_revision_request_duration_bucket{destination_namespace=\\\"$namespace\\\", destination_configuration=~\\\"$configuration\\\",destination_revision=~\\\"$revision\\\"}[1m])) by (destination_revision, le)), \\\"destination_revision\\\", \\\"$2\\\", \\\"destination_revision\\\", \\\"$configuration(-+)(.*)\\\")\",\n          \"format\": \"time_series\",\n          \"intervalFactor\": 1,\n          \"legendFormat\": \"{{"{{"}} destination_revision {{"}}"}} (p99)\",\n          \"refId\": \"\
    D\"\n        }\n      ],\n      \"thresholds\": [],\n      \"timeFrom\": null,\n      \"timeShift\": null,\n      \"title\": \"Response Time by Revision\",\n      \"tooltip\": {\n        \"shared\": true,\n        \"sort\": 2,\n        \"value_type\": \"individual\"\n      },\n      \"type\": \"graph\",\n      \"xaxis\": {\n        \"buckets\": null,\n        \"mode\": \"time\",\n        \"name\": null,\n        \"show\": true,\n        \"values\": []\n      },\n      \"yaxes\": [\n        {\n          \"format\": \"s\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": true\n        },\n        {\n          \"format\": \"short\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": false\n        }\n      ]\n    },\n    {\n      \"aliasColors\": {},\n      \"bars\": false,\n      \"dashLength\": 10,\n      \"dashes\": false,\n     \
    \ \"datasource\": \"prometheus\",\n      \"fill\": 1,\n      \"gridPos\": {\n        \"h\": 9,\n        \"w\": 12,\n        \"x\": 12,\n        \"y\": 17\n      },\n      \"id\": 21,\n      \"legend\": {\n        \"alignAsTable\": false,\n        \"avg\": true,\n        \"current\": false,\n        \"hideEmpty\": false,\n        \"hideZero\": false,\n        \"max\": false,\n        \"min\": false,\n        \"rightSide\": false,\n        \"show\": true,\n        \"total\": false,\n        \"values\": true\n      },\n      \"lines\": true,\n      \"linewidth\": 1,\n      \"links\": [],\n      \"nullPointMode\": \"null\",\n      \"percentage\": false,\n      \"pointradius\": 5,\n      \"points\": false,\n      \"renderer\": \"flot\",\n      \"seriesOverrides\": [],\n      \"spaceLength\": 10,\n      \"stack\": false,\n      \"steppedLine\": false,\n      \"targets\": [\n        {\n          \"expr\": \"label_replace(histogram_quantile(0.50, sum(rate(istio_revision_request_duration_bucket{destination_namespace=\\\
    \"$namespace\\\", destination_configuration=~\\\"$configuration\\\",destination_revision=~\\\"$revision\\\",response_code=~\\\"2.*\\\"}[1m])) by (le)), \\\"destination_revision\\\", \\\"$2\\\", \\\"destination_revision\\\", \\\"$configuration(-+)(.*)\\\")\",\n          \"format\": \"time_series\",\n          \"intervalFactor\": 1,\n          \"legendFormat\": \"2xx (p50)\",\n          \"refId\": \"C\"\n        },\n        {\n          \"expr\": \"label_replace(histogram_quantile(0.50, sum(rate(istio_revision_request_duration_bucket{destination_namespace=\\\"$namespace\\\", destination_configuration=~\\\"$configuration\\\",destination_revision=~\\\"$revision\\\",response_code=~\\\"3.*\\\"}[1m])) by (le)), \\\"destination_revision\\\", \\\"$2\\\", \\\"destination_revision\\\", \\\"$configuration(-+)(.*)\\\")\",\n          \"format\": \"time_series\",\n          \"intervalFactor\": 1,\n          \"legendFormat\": \"3xx (p50)\",\n          \"refId\": \"D\"\n        },\n        {\n      \
    \    \"expr\": \"label_replace(histogram_quantile(0.50, sum(rate(istio_revision_request_duration_bucket{destination_namespace=\\\"$namespace\\\", destination_configuration=~\\\"$configuration\\\",destination_revision=~\\\"$revision\\\",response_code=~\\\"4.*\\\"}[1m])) by (le)), \\\"destination_revision\\\", \\\"$2\\\", \\\"destination_revision\\\", \\\"$configuration(-+)(.*)\\\")\",\n          \"format\": \"time_series\",\n          \"intervalFactor\": 1,\n          \"legendFormat\": \"4xx (p50)\",\n          \"refId\": \"A\"\n        },\n        {\n          \"expr\": \"label_replace(histogram_quantile(0.50, sum(rate(istio_revision_request_duration_bucket{destination_namespace=\\\"$namespace\\\", destination_configuration=~\\\"$configuration\\\",destination_revision=~\\\"$revision\\\",response_code=~\\\"5.*\\\"}[1m])) by (le)), \\\"destination_revision\\\", \\\"$2\\\", \\\"destination_revision\\\", \\\"$configuration(-+)(.*)\\\")\",\n          \"format\": \"time_series\",\n       \
    \   \"intervalFactor\": 1,\n          \"legendFormat\": \"5xx (p50)\",\n          \"refId\": \"B\"\n        },\n        {\n          \"expr\": \"label_replace(histogram_quantile(0.95, sum(rate(istio_revision_request_duration_bucket{destination_namespace=\\\"$namespace\\\", destination_configuration=~\\\"$configuration\\\",destination_revision=~\\\"$revision\\\",response_code=~\\\"2.*\\\"}[1m])) by (le)), \\\"destination_revision\\\", \\\"$2\\\", \\\"destination_revision\\\", \\\"$configuration(-+)(.*)\\\")\",\n          \"format\": \"time_series\",\n          \"intervalFactor\": 1,\n          \"legendFormat\": \"2xx (p95)\",\n          \"refId\": \"E\"\n        },\n        {\n          \"expr\": \"label_replace(histogram_quantile(0.95, sum(rate(istio_revision_request_duration_bucket{destination_namespace=\\\"$namespace\\\", destination_configuration=~\\\"$configuration\\\",destination_revision=~\\\"$revision\\\",response_code=~\\\"3.*\\\"}[1m])) by (le)), \\\"destination_revision\\\"\
    , \\\"$2\\\", \\\"destination_revision\\\", \\\"$configuration(-+)(.*)\\\")\",\n          \"format\": \"time_series\",\n          \"intervalFactor\": 1,\n          \"legendFormat\": \"3xx (p95)\",\n          \"refId\": \"F\"\n        },\n        {\n          \"expr\": \"label_replace(histogram_quantile(0.95, sum(rate(istio_revision_request_duration_bucket{destination_namespace=\\\"$namespace\\\", destination_configuration=~\\\"$configuration\\\",destination_revision=~\\\"$revision\\\",response_code=~\\\"4.*\\\"}[1m])) by (le)), \\\"destination_revision\\\", \\\"$2\\\", \\\"destination_revision\\\", \\\"$configuration(-+)(.*)\\\")\",\n          \"format\": \"time_series\",\n          \"intervalFactor\": 1,\n          \"legendFormat\": \"4xx (p95)\",\n          \"refId\": \"G\"\n        },\n        {\n          \"expr\": \"label_replace(histogram_quantile(0.95, sum(rate(istio_revision_request_duration_bucket{destination_namespace=\\\"$namespace\\\", destination_configuration=~\\\"$configuration\\\
    \",destination_revision=~\\\"$revision\\\",response_code=~\\\"5.*\\\"}[1m])) by (le)), \\\"destination_revision\\\", \\\"$2\\\", \\\"destination_revision\\\", \\\"$configuration(-+)(.*)\\\")\",\n          \"format\": \"time_series\",\n          \"intervalFactor\": 1,\n          \"legendFormat\": \"5xx (p95)\",\n          \"refId\": \"H\"\n        }\n      ],\n      \"thresholds\": [],\n      \"timeFrom\": null,\n      \"timeShift\": null,\n      \"title\": \"Response Time by Response Code\",\n      \"tooltip\": {\n        \"shared\": true,\n        \"sort\": 2,\n        \"value_type\": \"individual\"\n      },\n      \"type\": \"graph\",\n      \"xaxis\": {\n        \"buckets\": null,\n        \"mode\": \"time\",\n        \"name\": null,\n        \"show\": true,\n        \"values\": []\n      },\n      \"yaxes\": [\n        {\n          \"format\": \"s\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": true\n\
    \        },\n        {\n          \"format\": \"short\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": false\n        }\n      ]\n    },\n    {\n      \"collapsed\": false,\n      \"gridPos\": {\n        \"h\": 1,\n        \"w\": 24,\n        \"x\": 0,\n        \"y\": 26\n      },\n      \"id\": 13,\n      \"panels\": [],\n      \"title\": \"Request and Response Sizes\",\n      \"type\": \"row\"\n    },\n    {\n      \"aliasColors\": {},\n      \"bars\": false,\n      \"dashLength\": 10,\n      \"dashes\": false,\n      \"datasource\": \"prometheus\",\n      \"fill\": 1,\n      \"gridPos\": {\n        \"h\": 10,\n        \"w\": 12,\n        \"x\": 0,\n        \"y\": 27\n      },\n      \"id\": 22,\n      \"legend\": {\n        \"avg\": false,\n        \"current\": false,\n        \"max\": false,\n        \"min\": false,\n        \"show\": true,\n        \"total\": false,\n        \"values\": false\n   \
    \   },\n      \"lines\": true,\n      \"linewidth\": 1,\n      \"links\": [],\n      \"nullPointMode\": \"null\",\n      \"percentage\": false,\n      \"pointradius\": 5,\n      \"points\": false,\n      \"renderer\": \"flot\",\n      \"seriesOverrides\": [],\n      \"spaceLength\": 10,\n      \"stack\": false,\n      \"steppedLine\": false,\n      \"targets\": [\n        {\n          \"expr\": \"label_replace(round(sum(rate(istio_revision_response_size_sum{destination_namespace=\\\"$namespace\\\", destination_configuration=~\\\"$configuration\\\"}[1m])) by (destination_revision) / sum(rate(istio_revision_response_size_count{destination_namespace=\\\"$namespace\\\", destination_configuration=~\\\"$configuration\\\"}[1m])) by (destination_revision), 1), \\\"destination_revision\\\", \\\"$2\\\", \\\"destination_revision\\\", \\\"$configuration(-+)(.*)\\\")\",\n          \"format\": \"time_series\",\n          \"interval\": \"\",\n          \"intervalFactor\": 1,\n          \"legendFormat\"\
    : \"{{"{{"}}destination_revision{{"}}"}}\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"thresholds\": [],\n      \"timeFrom\": null,\n      \"timeShift\": null,\n      \"title\": \"Response Size by Revision\",\n      \"tooltip\": {\n        \"shared\": true,\n        \"sort\": 2,\n        \"value_type\": \"individual\"\n      },\n      \"type\": \"graph\",\n      \"xaxis\": {\n        \"buckets\": null,\n        \"mode\": \"time\",\n        \"name\": null,\n        \"show\": true,\n        \"values\": []\n      },\n      \"yaxes\": [\n        {\n          \"format\": \"decbytes\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": true\n        },\n        {\n          \"format\": \"short\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": false\n        }\n      ]\n    },\n    {\n      \"aliasColors\": {},\n      \"bars\": false,\n\
    \      \"dashLength\": 10,\n      \"dashes\": false,\n      \"datasource\": \"prometheus\",\n      \"fill\": 1,\n      \"gridPos\": {\n        \"h\": 10,\n        \"w\": 12,\n        \"x\": 12,\n        \"y\": 27\n      },\n      \"id\": 23,\n      \"legend\": {\n        \"avg\": false,\n        \"current\": false,\n        \"max\": false,\n        \"min\": false,\n        \"show\": true,\n        \"total\": false,\n        \"values\": false\n      },\n      \"lines\": true,\n      \"linewidth\": 1,\n      \"links\": [],\n      \"nullPointMode\": \"null\",\n      \"percentage\": false,\n      \"pointradius\": 5,\n      \"points\": false,\n      \"renderer\": \"flot\",\n      \"seriesOverrides\": [],\n      \"spaceLength\": 10,\n      \"stack\": false,\n      \"steppedLine\": false,\n      \"targets\": [\n        {\n          \"expr\": \"label_replace(round(sum(rate(istio_revision_request_size_sum{destination_namespace=\\\"$namespace\\\", destination_configuration=~\\\"$configuration\\\
    \"}[1m])) by (destination_revision) / sum(rate(istio_revision_request_size_count{destination_namespace=\\\"$namespace\\\", destination_configuration=~\\\"$configuration\\\"}[1m])) by (destination_revision), 1), \\\"destination_revision\\\", \\\"$2\\\", \\\"destination_revision\\\", \\\"$configuration(-+)(.*)\\\")\",\n          \"format\": \"time_series\",\n          \"interval\": \"\",\n          \"intervalFactor\": 1,\n          \"legendFormat\": \"{{"{{"}}destination_revision{{"}}"}}\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"thresholds\": [],\n      \"timeFrom\": null,\n      \"timeShift\": null,\n      \"title\": \"Request Size by Revision\",\n      \"tooltip\": {\n        \"shared\": true,\n        \"sort\": 2,\n        \"value_type\": \"individual\"\n      },\n      \"type\": \"graph\",\n      \"xaxis\": {\n        \"buckets\": null,\n        \"mode\": \"time\",\n        \"name\": null,\n        \"show\": true,\n        \"values\": []\n      },\n      \"yaxes\": [\n     \
    \   {\n          \"format\": \"decbytes\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": true\n        },\n        {\n          \"format\": \"short\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": false\n        }\n      ]\n    }\n  ],\n  \"refresh\": \"5s\",\n  \"schemaVersion\": 16,\n  \"style\": \"dark\",\n  \"tags\": [],\n  \"templating\": {\n    \"list\": [\n      {\n        \"allValue\": null,\n        \"current\": {},\n        \"datasource\": \"prometheus\",\n        \"hide\": 0,\n        \"includeAll\": false,\n        \"label\": \"Namespace\",\n        \"multi\": false,\n        \"name\": \"namespace\",\n        \"options\": [],\n        \"query\": \"label_values(istio_revision_request_count{destination_namespace!=\\\"unknown\\\"}, destination_namespace)\",\n        \"refresh\": 1,\n        \"regex\": \"\",\n    \
    \    \"sort\": 1,\n        \"tagValuesQuery\": \"\",\n        \"tags\": [],\n        \"tagsQuery\": \"\",\n        \"type\": \"query\",\n        \"useTags\": false\n      },\n      {\n        \"allValue\": null,\n        \"current\": {},\n        \"datasource\": \"prometheus\",\n        \"hide\": 0,\n        \"includeAll\": false,\n        \"label\": \"Configuration\",\n        \"multi\": false,\n        \"name\": \"configuration\",\n        \"options\": [],\n        \"query\": \"label_values(istio_revision_request_count{destination_namespace=\\\"$namespace\\\", destination_configuration!=\\\"unknown\\\"}, destination_configuration)\",\n        \"refresh\": 1,\n        \"regex\": \"\",\n        \"sort\": 1,\n        \"tagValuesQuery\": \"$tag\",\n        \"tags\": [],\n        \"tagsQuery\": \"\",\n        \"type\": \"query\",\n        \"useTags\": false\n      },\n      {\n        \"allValue\": null,\n        \"current\": {},\n        \"datasource\": \"prometheus\",\n        \"hide\"\
    : 0,\n        \"includeAll\": true,\n        \"label\": \"Revision\",\n        \"multi\": true,\n        \"name\": \"revision\",\n        \"options\": [],\n        \"query\": \"label_values(istio_revision_request_count{destination_namespace=\\\"$namespace\\\", destination_configuration=~\\\"$configuration\\\", destination_revision!=\\\"unknown\\\"}, destination_revision)\",\n        \"refresh\": 1,\n        \"regex\": \"\",\n        \"sort\": 2,\n        \"tagValuesQuery\": \"\",\n        \"tags\": [],\n        \"tagsQuery\": \"\",\n        \"type\": \"query\",\n        \"useTags\": false\n      }\n    ]\n  },\n  \"time\": {\n    \"from\": \"now-15m\",\n    \"to\": \"now\"\n  },\n  \"timepicker\": {\n    \"refresh_intervals\": [\n      \"5s\",\n      \"10s\",\n      \"30s\",\n      \"1m\",\n      \"5m\",\n      \"15m\",\n      \"30m\",\n      \"1h\",\n      \"2h\",\n      \"1d\"\n    ],\n    \"time_options\": [\n      \"5m\",\n      \"15m\",\n      \"1h\",\n      \"6h\",\n      \"12h\"\
    ,\n      \"24h\",\n      \"2d\",\n      \"7d\",\n      \"30d\"\n    ]\n  },\n  \"timezone\": \"\",\n  \"title\": \"Knative Serving - Revision HTTP Requests\",\n  \"uid\": \"im_gFbWik\",\n  \"version\": 2\n}\n"
kind: ConfigMap
metadata:
  labels: {{ include "labels" . | nindent 4 }} {{ "serving.knative.dev/release: \"devel\"" | nindent 4 }} {{ cat "app:" .Chart.Name | nindent 4 }}
  name: grafana-dashboard-definition-knative
  namespace: knative-monitoring
